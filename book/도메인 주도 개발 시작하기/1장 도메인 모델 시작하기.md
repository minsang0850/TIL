# 1.1 도메인이란?
온라인 서점은 소프트웨어로 해결하고자 하는 문제 영역, 즉 도메인에 해당한다.

한 도메인은 다시 하위 도메인으로 나뉠 수 있다.

# 1.2 도메인 전문가와 개발자 간 지식 공유
정산, 배송 등 각 영역에는 전문가가 있다.
전문가는 해당 도메인에 대한 지식과 경험을 바탕으로 본인들이 원하는 기능 개발을 요구한다.

요구사항을 올바르게 이해하는 방법은 개발자와 전문가가 직접 대화하는 것이다.
도메인 전문가 만큼은 아니어도 이해관계자와 개발자도 도메인 지식을 갖춰야 한다.

# 1.3 도메인 모델
기본적으로 도메인 모델은 특정 도메인을 개념적으로 표현한 것이다.

도메인 모델은 도메인 자체를 이해하기 위한 개념 모델이다.

# 1.4 도메인 모델 패턴
일반적인 애플리케이션의 아키텍처
- 표현(Presentation): 사용자 요청을 처리하고  사용자에게 정보를 보여준다.
- 응용(Application): 사용자가 요청한 기능을 실행한다. 업무 로직을 직접 구현하지 않으며 도메인 계층을 조합해서 기능을 실행한다.
- 도메인(Domain): 시스템이 제공할 도메인 규칙을 구현한다.
- 인프라스트럭처(Infrastructure): 데이터베이스나 메시징 시스템 같은 외부 시스템과의 연동을 처리한다.

여기서 도메인 모델은 아키텍처 상의 도메인 계층을 객체 지향 기법으로 구현하는 패턴을 말한다.

도메인 계층은 도메인의 핵심 규칙을 구현한다. 
주문 도메인의 경우 '출고 전에 배송지를 변경할 수 있다', '주문 취소는 배송 전에만 가능하다' 등의 규칙을 구현한 코드가 도메인 계층에 위치하게 된다.

주문과 관련된 중요 업무 규칙을 주문 도메인 모델인 Order나 OrderState에서 구현해야 한다.
핵심 규칙을 구현한 코드는 도메인 모델에만 위치하기 때문에 규칙이 바뀌거나 규칙을 확장해야 할 때 다른 코드에 영향을 덜 주고 변경 내역을 모델에 반영할 수 있게 된다.

# 1.5 도메인 모델 속출

# 1.6 엔티티와 밸류
요구사항 분석 과정에서 도출한 모델은 크게 엔티티(Entity)와 밸류(Value)로 구분할 수 있다.

## 1.6.1 엔티티
엔티티의 가장 큰 특징은 식별자를 가진다는 것이다. (각 주문은 주문번호를 가진다.)

## 1.6.2 엔티티의 식별자 생성
식별자는 다음 중 한 가지 방식으로 생성한다.
- 특정 규칙에 따라 생성.
- UUID나 NanoID와 같은 고유 식별자 생성기 사용
- 값을 직접 입력
- 일련번호 사용(시퀀스나 auto increment)

흔히 사용하는 규칙은 시간과 다른 값을 조합하는 것

회원의 아이디나 이메일 같은 식별자는 값을 직접 입력한다.

## 1.6.3 밸류 타입
ShippingInfo 클래스는 받는 사람과 주소에 대한 데이터를 갖고 있다.

밸류 타입이 꼭 두 개 이상의 데이터를 가져야 하는 것은 아니다.

밸류 객체의 데이터를 변경할 때는 기존 데이터를 변경하기보다는 변경한 데이터를 갖는 새로운 밸류 객체를 생성하는 방식을 선호한다. (불변) -> 안전한 코드

## 1.6.4 엔티티 식별자와 밸류 타입
엔티티의 식별자는 Stirng 같은 문자열로 구성된 경우가 많다.

식별자는 단순한 문자열이 아니라 특별한 의미를 가지는 경우가 많기 때문에 식별자를 위한 밸류 타입을 사용해서 의미가 잘 드러나도록 할 수 있다. (OrderNo)

## 1.6.5 도메인 모델에 set 메서드 넣지 않기
set 메서드는 도메인의 핵심 개념이나 의도를 코드에서 사라지게 한다.
또 다른 문제는 도메인 객체를 생성할 때 온전하지 않은 상태가 될 수 있다.
도메인 객체가 불완전한 상태로 사용되는 것을 막으려면 생성 시점에 필요한 것을 전달해 주어야 한다.


# 1.7 도메인 용어와 유비쿼터스 언어
전문가 개발자가 도메인과 관련된 공통의 언어를 만들고 이를 대화, 코드, 테스트 등 모든 곳에서 같은 용어를 사용해야 한다.