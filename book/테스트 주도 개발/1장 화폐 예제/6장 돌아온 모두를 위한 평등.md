우리는 테스트 케이스를 하나 작동하게 만들었다.
하지만 테스트를 빨리 통과하기 위해 몇 톤이나 되는 코드를 복사해서 붙이는 엄청난 죄를 저질렀다.
이제 청소할 시간이다.

가능한 방법 한 가지는 우리가 만든 클래스 중 하나가 다른 클래스를 상속받게 하는 것이다.
내가 그렇게 해봤ㄴ느데, 거의 어떤 코드도 궁원하지 못했다.

대신 두 클래스의 공통 상위 클래스를 찾아낼 생각이다.
- Money
  - Dollar
  - Franc

Money 클래스가 공통의 equals 코드를 갖게 하면 어떨까?

이래도 모든 테스트는 여전히 돌아갈 것이다.

amount 인스턴스를 Money로 옮기고, 하위 클래스에서도 변수를 볼 수 있도록 가시성을 private에서 protected로 변경했다.
```java
public boolean equals(Object object) {
    Money money = (Money) object;
    return amount == money.amount;
}
```

적절한 테스트를 갖지 못한 코드에서 TDD를 해야 하는 경우가 종종 있을 것이다.
충분한 테스트가 없다면 지원 테스트가 갖춰지지 않은 리팩토링을 만나게 될 수밖에 없다.

리팩토링하면서 실수했는데도 불구하고 테스트가 여전히 통과될 수도 있는 것이다.
어떻게 할텐가?

있으면 좋을 것 같은 테스트를 작성하라.
그렇게 하지 않으면 결국에는 리팩토링하다가 뭔가 깨트릴 것이다.
그러면 여러분은 리팩토링에 대해 안 좋은 느낌을 갖게 되고, 리팩토링을 덜 하게 된다.

다행히도 이번 테스트는 작성하기 쉽다. 그냥 Dollar 테스트를 복사하자.

Franc과 Dollar를 비교하면 어떻게 될까?
이건 7장에서 다뤄보자.

**검토**  
- 공통된 코드를 첫 번쨰 클래스(Dollar)에서 상위 클래스(Money)로 단계적으로 옮겼다.
- 두 번째 클래스(Franc)도 Money의 하위 클래스로 만들었다.
- 불필요한 구현을 제거하기 전에 두 equals() 구현을 일치시켰다.
