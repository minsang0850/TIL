# 지역 클래스
- 지역 클래스는 내부 클래스의 특별한 종류의 하나이다. 따라서 내부 클래스의 특징을 그대로 가진다.
- 지역 클래스는 지역 변수와 같이 코드 블럭 안에서 정의된다.


# 지역 변수 캡처
지역 클래스가 접근하는 지역 변수의 값은 변경하면 안된다.

## 변수의 생명 주기
- 클래스 변수: 프로그램 종료까지, 가장 길다(메서드 영역)
- 인스턴스 변수: 인스턴스의 생존 기간(힙 영역)
- 지역 변수: 메서드 호출이 끝나면 사라짐(스택 영역)

지역 클래스는 지역 변수에 접근할 수 있다.

지역 변수의 생명 주기는 짧고, 지역 클래스를 통해 생성한 인스턴스의 생명 주기는 길다.
지역 클래스를 통해 생성한 인스턴스가 지역 변수에 접근해야 하는데, 둘의 생명 주기가 다르기 때문에 인스턴스는 살아있지만, 지역 변수는 사라져있을 수 있다.

## 지역 변수 캡처
지역 클래스의 인스턴스를 생성하는 시점에 필요한 지역 변수를 복사해서 생성한 인스턴스에 함께 넣어둔다. (접근이 필요한 지역 변수만 캡처)

**정리**
지역 클래스는 인스턴스를 생성할 때 필요한 지역 변수를 먼저 캡처해서 인스턴스에 보관한다.
지역 클래스의 인스턴스를 통해 지역 변수에 접근하면, 실제 지역 변수가 아닌 캡처 변수에 접근하는 것이다.

## 지역 변수의 제약
지역 클래스가 접근하는 지역 변수는 절대로 중간에 값이 변하면 안 된다.
따라서 final로 선언하거나 또는 사실상 final 이어야 한다.

**사실상 final**

**캡처 변수의 값을 변경하지 못하는 이유**
- 지연 변수의 값을 변경하면 인스턴스 캡처 변수의 값도 변경해야 한다.
- 인스턴스에 있는 캡처 변수의 값을 변경하면 해당 지역 변수의 값도 다시 변경해야 한다.
- 예상치 못한 곳에서 값이 변경될 수 있다. -> 디버깅 어렵
- 지역 변수와 캡처 변수의 값을 동기화 해야 하는데, 멀티스레드 상황에서 이런 동기화는 어렵고, 성능에 나쁜 영향을 줄 수 있다.

-> 자바는 캡처한 지역 변수의 값을 변하지 못하게 막아서 이러한 문제를 근본적으로 차단한다.

# 익명 클래스
익명 클래스는 지역 클래스의 특별한 종류의 하나이다.

지역 클래스를 사용하기 위해선 선언과 생성이라는 2가지 단계를 거친다.

**특징**
- 이름 없는 지역 클래스를 선언하면서 동시에 생성한다.
- 익명 클래스는 부모 클래스를 상속 받거나, 또는 인터페이스를 구현해야 한다.
- 익명 클래스는 말 그대로 이름이 없다. 이름을 가지지 않으므로, 생성자를 가질 수 없다.
- 익명 클래스는  `바깥 클래스 이름 + $ + 숫자`로 정의된다.

## 람다
### 개요
자바 8 이전까지 메서드에 인수로 전달할 수 있는 것은 크게 2가지였다.
- 기본형 타입
- 참조형 타입

클래스나 인스턴스에 관계 없이 메서드만 전달할 수 있으면 더 간단하지 않을까?

자바 8에 들어서면서 큰 변화가 있었는데 바로 메서드(정확히는 함수)를 인수로 전달할 수 있게 되었다. 이것을 간단히 람다(Lambda)라고 한다.

```java
Arrays.sort(names, (String a, String b) -> {
    return b.compareTo(a);
});
```
