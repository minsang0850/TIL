# 중첩 클래스, 내부 클래스란?
클래스 안에 클래스를 중첩해서 정의할 수 있는데, 이를 중첩 클래스라고 한다.

**종류**
- 정적 중첩 클래스
- 내부 클래스
  - 내부 클래스: 바깥 클래스와 인스턴스의 멤버에 접근
  - 지역 클래스: 내부 클래스의 특징 + 지역 변수에 접근
  - 익명 클래스: 지역 클래스의 특징 + 클래스의 이름이 없는 클래스

중첩 클래스를 정의하는 위치는 변수의 선언 위치와 같다.

**변수의 선언 위치**
- 정적 변수
- 인스턴스 변수
- 지역 변수

**중첩 클래스의 선언 위치**
- 정적 중첩 클래스
- 내부 클래스 -> 인스턴스 변수와 같은 위치
- 지역 클래스 -> 지역 변수와 같은 위치

**중첩과 내부의 차이**
- 중첩: 나의 안에 있지만 내것이 아닌 것
  - 나무 상자 안 나무 상자
- 내부: 내부에서 나를 구성하는 요소
  - 내 안의 심장

**중첩 클래스는 언제 사용해야 하나?**  
내부 클래스를 포함한 모든 중첩 클래스는 특정 클래스가 다른 하나의 클래스 안에서만 사용되거나, 둘이 아주 긴밀하게 연결되어 있는 특별한 경우에만 사용해야 한다.
외부의 여러 클래스가 특정 중첩 클래스를 사용한다면 중첩 클래스로 만들면 안된다.

**중첩 클래스를 사용하는 이유**
- 논리적 그룹화
- 캡슐화: 중첩 클래스는 바깥 클래스의 private 멤버에 접근할 수 있다.

# 정적 중첩 클래스
- 자신의 멤버에 접근 가능
- 바깥 클래스의 인스턴스 변수 접근 불가
- 바깥 클래스의 클래스 멤버 접근 가능
  - private이여도 접근 가능

private에 접근할 수 있다는 것 외에는 다른 클래스라고 생각해도 무방

# 정적 중첩 클래스 활용
## 중첩 클래스의 접근
다른 곳에 있는 중첩 클래스에 접근할때는 바깥 클래스를 통해서 접근해야 한다.

그러나 외부의 중첩 클래스에 접근하는 것은 좋지 않다. -> 이미 중첩 클래스의 용도에 맞지 않다.

# 내부 클래스
내부 클래스는 바깥 클래스의 인스턴스를 이루는 요소가 된다.
내부 클래스는 바깥 클래스의 인스턴스에 소속된다.
내부 클래스는 바깥 클래스의 인스턴스에 소속되어야 한다.

```java
class Outer {
    class Inner {

    }
}

Outer outer = new Outer();
Outer.Inner inner = outer.new Inner();
```
내부 인스턴스는 바깥 인스턴스의 참조를 가지고 있다.
-> 값에 접근할때 내부에 없으면 바깥 인스턴스의 멤버에 접근

# 내부 클래스의 활용
내부 클래스는 자신을 생성한 바깥 클래스의 인스턴스를 **자동** 으로 참조한다.

필요한 메서드만 외부에 노출함으로써 캡슐화를 높일 수 있다.

**중첩 클래스는 언제 사용해야 하나?**
내부 클래스를 포함한 모든 중첩 클래스는 특정 클래스가 다른 하나의 클래스 안에서만 사용되거나, 둘이 아주 긴밀하게 연결되어 있는 특별한 경우에만 사용해야 한다.

# 같은 이름의 바깥 변수 접근
내부 클래스에서 바깥 클래스와 같은 이름의 변수에 접근할 때는 this를 사용하면 내부 클래스의 변수를 참조한다.
```java
public class Shadowing {
    public int value = 1;
    
    class Inner {
        public int value = 2;
        
        public void method() {
            int value = 3;
            System.out.println(value); // 3
            System.out.println(this.value); // 2
            System.out.println(Shadowing.this.value); // 1
        }
    }
}
```

인스턴스 참조를 사용하면 외부 변수에 접근할 수 있다.
-> 하지만 이름을 애초에 다르게 설정하는 것이 좋다. - 명확성